# System utils

#include guard
string.isnotemptyorblank $system_defined && return 0
export system_defined=1

importutility string

function system.findappbundleid() {
	osascript -e "id of app \"$1\""
	#echo 'id of app' "$1" 'is something'
	#echo "id of app $@"
}

function system.private.getcurrentdatehyphenated() {
  local curdate=$(date +'%Y-%m-%d-%T')
  curdate="${curdate//:/-}"
  echo $curdate
}

# Pass the character you want as the separator. If not given
# will use hyphen "-"
function system.getcurrentdate() {
	local separator=$1
	if string.isemptyorblank $separator
	then
		echo $(system.private.getcurrentdatehyphenated)
	else
		echo $(string.simplereplace $(system.private.getcurrentdatehyphenated) "-" "$separator")
	fi
}

function system.findfolder() {
	mdfind kind:folder "$1"
}

function system.whoisusingport8080() {
	lsof -i tcp:8080
}
